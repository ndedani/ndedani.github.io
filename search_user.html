<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search User</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="  crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"  crossorigin="anonymous"></script>

    <link rel="stylesheet" type="text/css" href="WebNavBar.css" />

</head>

<style>
  /* Search bar, Search User, button , Edti user button */
  .container{
    text-align: center;
    position: absolute;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
  .button{
    text-align: center;
  
  }
  .button:hover { 
    background-color: #e7e7e7;
  }
  /* Modal after edit button is clicked */
  .bg-modal{
    /* display: none; /* Hidden by default */
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.719);
    position: absolute;
    top: 0;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .tab1{
    display: inline-block;
    float: right;
  }


</style>
<body>
  <!-- Navbar with logo and buttons-->
    <!-- <nav>
        <div class="logo-container">
          <a href="index.html" target="_blank">
            <img src="app_logo.png" id="Logo"></a>
        </div>
        <div class="welcome-txt">
            <h3>Welcome Admin!</h2>
        </div>
        <ul class="nav-links">
            <li><a href="#">placeholder</a></li>
            <li><a href="#">placeholder</a></li>
            <li><a href="#">placeholder</a></li>
            <li><a href="#">placeholder</a></li>
        </ul>

        <!-- Added an empty profile pic with the option of switching to the pre-set pic (SHOULD be changed!) --
        <img src="profile.jpeg" class="profile" type="button" id="profile" data-bs-toggle="dropdown"><span class="caret"></span>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
            <li><center><a type="button" onclick="showPic()"> Add Picture</a></center></li>
        </ul>



        <!-- Added a pre-set pic to go over the empty profile pic (SHOULD be changed! This was only temporary.)--
        <img src="admin_pic.png" class="profilepic" id="adminPic" data-bs-toggle="dropdown"><span class="caret"></span>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
            <li><center><a type="button" onclick="hidePic()"> Remove Picture</a></center></li>
        </ul>
    </nav> -->
<!-- Navbar with logo and buttons-->
<nav>
  <div class="logo-container">
    <a href="index.html">
      <img src="app_logo.png" id="Logo"></a>
  </div>
  <div class="welcome-txt">
      <h2>  Search User </h2>
  </div>
  

 <!-- Added an empty profile pic with the option of switching to the pre-set pic (SHOULD be changed!)-->
 <img src="profile.jpeg" class="profile" type="button" id="profile" data-bs-toggle="dropdown"><span class="caret"></span>

<!-- Page Links under nav -->

<div class="username">
      <!-- To load username when page is loaded -->
      <script>
          var showingUserFirstName = document.getElementById('userFirstName');
          document.write(showingUserFirstName);
      </script>
  
</div>
</nav>

<div>
      <div class="nav-links">
          <li><a href="#">Placeholder</a></li>
          <li><a href="#">Self Help</a></li>
          <li><a href="#">Contact Us</a></li>
          <li><a href="Login.html">Sign in</a></li>
      </div>
  </div>

<!-- Sidenav Menu from W3 -->
<!-- https://www.w3schools.com/howto/howto_js_sidenav.asp -->
<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a href="#">About</a>
  <a href="#">Services</a>
  <a href="#">Clients</a>
  <a href="#">Contact</a>
</div>

<!-- Use any element to open the sidenav -->
<span onclick="openNav()"><button >â‰¡</button></span>


      <script>
          /* Set the width of the side navigation to 250px */
  function openNav() {
      document.getElementById("mySidenav").style.width = "250px";
  }
  
  /* Set the width of the side navigation to 0 */
  function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
  }
</script>


<br> <br>

  <div class = "container">
    <input id="searchUser" type="text"> <br><br>
    <button class ="button" id="searchUserBtn"> Search User</button>
    <button class ="button" id="editUserBtn"> Edit User</button>
    <h3 id="findUserName" type="text"></h3>
    <h3 id="findUserID" type="text"></h3>
    <h3 id="findUserPosition" type="text"></h3>
</div>

  </div>

</div>

<h3 id="findUserName" type="text"></h3>
<h3 id="findUserID" type="text"></h3>
<h3 id="findUserPosition" type="text"></h3>
</center>


<!-- Footer -->
<footer class="footer">
    <h1>Contact Us!</h1>
    <ul> 
        <a href="#">PlaceHolder</a>
        <a href="#">PlaceHolder</a>
        <a href="#">PlaceHolder</a>
        
    </ul>
   
    
</footer>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.11.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.11.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCLeXpBcmY50646HWq9RkVjf2tNcPSfXCA",
      authDomain: "appdomain-5bc76.firebaseapp.com",
      databaseURL: "https://appdomain-5bc76-default-rtdb.firebaseio.com",
      projectId: "appdomain-5bc76",
      storageBucket: "appdomain-5bc76.appspot.com",
      messagingSenderId: "854714021617",
      appId: "1:854714021617:web:3631bc9729ca4d87d49b50",
      measurementId: "G-721Y65S2FV"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    //Everything above this is firebase config, I know nothing about it 
    //take this comment off 
    import {getDatabase, set, get, update, remove, ref, child}
    from "https://www.gstatic.com/firebasejs/9.11.0/firebase-database.js"

    const db = getDatabase();
    //This is a text field
    var enterUser = document.querySelector("#searchUser");
   
    //these are not assigned. but are text fields
    //var findUserID = document.querySelector("#findUserID");
    
    var findUserName = document.querySelector("#findUserName");
    var findUserPosition = document.querySelector("#findUserPosition");
    var findUserID = document.querySelector("#findUserID");
    //This is a button 
    var searchUserBtn = document.querySelector("#searchUserBtn");

    
    function FindData()
    {
      //because you're referencing to a spcific reference in database
      const dbref= ref(db);
      get(child(dbref, "Users/"+ enterUser.value))
      .then((snapshot)=>{
        if(snapshot.exists())
        {
          findUserName.innerHTML = "Name: "+snapshot.val().Name;
          findUserPosition.innerHTML = "Position: "+ snapshot.val().Position;
          findUserID.innerHTML = "ID: " + snapshot.val().ID + "Date: "+ snapshot.val().Date;
        }
        else
        {
          alert("No Data Found!");
        }
      })
      .catch((error)=>{alert(error)})
    }
    searchUserBtn.addEventListener('click', FindData);

  </script>

 <!-- Functions to add and remove profile pic -->
<script>
  // This function displays the pre-selected picture while also hiding the profile temporary picture:
  function showPic() {

    document.getElementById('adminPic')
            .style.display = "block";

    document.getElementById('profile')
            .style.display = "none";
    }

  // This function displays the profile temporary picture while also hiding the pre-selected picture:
  function hidePic() {

    document.getElementById('profile')
            .style.display = "block";

    document.getElementById('adminPic')
            .style.display = "none";
    }
</script>
</body>